{"version":3,"sources":["main.js"],"names":["document","addEventListener","isMobileDevice","test","navigator","userAgent","isiPhone","documentElement","style","match","isiPad","isiPod","media","window","matchMedia","body","querySelector","header","burgerBtn","burgerList","burger","[object Object]","btn","list","this","opened","isIphone","btnDisabled","disableBtn","disableScroll","classList","add","setAttribute","enableScroll","remove","contains","close","open","disabled","pagePosition","scrollY","scrollBehavior","dataset","position","top","parseInt","scroll","left","removeAttribute","animItems","querySelectorAll","forEach","el","elementInViewport","element","offsetTop","offsetBottom","delay","bounds","getBoundingClientRect","height","innerHeight","transitionDelay","hasAttribute","length","modalButtons","lockPadding","modalCloseButtons","currentCloseBtn","bodyWasNotLock","previousActiveElement","unlock","isMultipleClick","index","modalCurrentButton","e","modalName","path","curentModal","getElementById","modalOpen","setTimeout","focus","preventDefault","console","log","modalClose","closest","activeElement","modalActive","lockPaddingValue","innerWidth","offsetWidth","paddingRight","bodyLock","target","doUnlock","which","Element","prototype","css","node","matches","parentElement","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","toggle"],"mappings":"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","file":"main.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n\t// Includes\n\t// // Variables\r\nconst isMobileDevice = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\r\nconst isSmoothScrollSupported = 'scrollBehavior' in document.documentElement.style;\r\nconst isiPhone = (navigator.userAgent.match(/iPhone/i) != null);\r\nconst isiPad = (navigator.userAgent.match(/iPad/i) != null);\r\nconst isiPod = (navigator.userAgent.match(/iPod/i) != null);\r\nconst media = window.matchMedia(\"(max-width: 992px)\");\r\n\r\nconst body = document.querySelector('.body');\r\nconst header = document.querySelector('.header');\r\nconst burgerBtn = document.querySelector('.burger');\r\nconst burgerList = document.querySelector('.header__nav');\r\nconst burger = new Burger(burgerBtn, burgerList);\r\n\r\n\r\n;\n\t// // scrollLockIOS\r\n\r\n// Выключение скролла\r\nlet disableScroll = () => {\r\n\tlet pagePosition = window.scrollY;\r\n\tdocument.querySelector('html').style.scrollBehavior = 'auto';\r\n\tdocument.body.classList.add('ios-lock');\r\n\tdocument.body.dataset.position = pagePosition;\r\n\tdocument.body.style.top = -pagePosition + 'px';\r\n}\r\n\r\n// Включение скролла\r\nlet enableScroll = () => {\r\n\tlet pagePosition = parseInt(document.body.dataset.position, 10);\r\n\tdocument.body.style.top = 'auto';\r\n\tdocument.body.classList.remove('ios-lock');\r\n\twindow.scroll({ top: pagePosition, left: 0 });\r\n\tdocument.querySelector('html').removeAttribute('style');\r\n\tdocument.body.removeAttribute('data-position');\r\n}\r\n\r\n// Слушатель на один элемент\r\nlet scrollLock_BtnListener = (item) => {\r\n\titem.addEventListener('click', (e) => {\r\n\t\titem.classList.toggle('scroll')\r\n\t\tif (item.classList.contains('scroll')) {\r\n\t\t\tdisableScroll();\r\n\t\t} else {\r\n\t\t\tenableScroll();\r\n\t\t}\r\n\t});\r\n};\n\t// // Animate On Scroll\r\n// class=\"animate-item\" data-animation='from-left'  data-delay=\"0.5\" data-animation-once\r\nconst animItems = document.querySelectorAll(\".animate-item\");\r\nif (!isMobileDevice) {\r\n\tconst elementInViewport = (element, offsetTop, offsetBottom, delay = 0) => {\r\n\t\tlet bounds = element.getBoundingClientRect();\r\n\t\tif (element.dataset.delay) delay = element.dataset.delay;\r\n\r\n\t\tif ((bounds.top + bounds.height - bounds.height * offsetBottom > 0) && (window.innerHeight - bounds.top - bounds.height * offsetTop > 0)) {\r\n\t\t\telement.classList.add(\"animated\");\r\n\t\t\telement.style.transitionDelay = `${delay}s`;\r\n\t\t} else if (!element.hasAttribute(\"data-animation-once\")) {\r\n\t\t\telement.classList.remove(\"animated\");\r\n\t\t}\r\n\t};\r\n\tif (animItems.length != 0) {\r\n\t\tanimItems.forEach(el => {\r\n\t\t\telementInViewport(el, .5, .5);\r\n\t\t})\r\n\t\tdocument.addEventListener('scroll', () => {\r\n\t\t\tanimItems.forEach(el => {\r\n\t\t\t\telementInViewport(el, .5, .5);\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n} else {\r\n\tanimItems.forEach((el) => {\r\n\t\tel.classList.add('animated')\r\n\t});\r\n}\r\n// -- //\r\n;\n\t// // MODAL\r\n\r\n// vars\r\nconst modalButtons = document.querySelectorAll('.modal-btn');\r\nconst lockPadding = document.querySelectorAll('.fixed-padding');\r\nconst modalCloseButtons = document.querySelectorAll('.close-modal');\r\nconst timeout = 800;\r\nlet currentCloseBtn;\r\nlet unlock = true;\r\nlet isMultipleClick = false;\r\nlet bodyWasNotLock;\r\n\r\n// Проверки\r\nif (typeof (disableScroll) !== 'function' && typeof (enableScroll) !== 'function') {\r\n\tconsole.log(`Тип данных переменных \"disableScroll\" и \"enableScroll\": \"${typeof (disableScroll)} и ${typeof (enableScroll)}\"! Для IOS НЕ будет выполнятся скрипт scrollLockIOS`);\r\n}\r\n// -- //\r\nif (modalButtons.length > 0) {\r\n\tfor (let index = 0; index < modalButtons.length; index++) {\r\n\t\tconst modalCurrentButton = modalButtons[index];\r\n\t\tmodalCurrentButton.addEventListener(\"click\", function (e) {\r\n\t\t\tconst modalName = modalCurrentButton.dataset.path;\r\n\t\t\tconst curentModal = document.getElementById(modalName);\r\n\t\t\tif (curentModal != null) {\r\n\t\t\t\tmodalOpen(curentModal);\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tmodalCloseButtons.forEach((el) => {\r\n\t\t\t\t\t\tel.focus()\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 100)\r\n\t\t\t\te.preventDefault();\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(`Модальное окно не существует! ${curentModal}`);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nif (modalCloseButtons.length > 0) {\r\n\tfor (let index = 0; index < modalCloseButtons.length; index++) {\r\n\t\tconst el = modalCloseButtons[index];\r\n\t\tcurrentCloseBtn = el;\r\n\t\tel.addEventListener('click', function (e) {\r\n\t\t\tmodalClose(el.closest('.modal'));\r\n\t\t\te.preventDefault();\r\n\t\t});\r\n\t}\r\n}\r\nlet previousActiveElement;\r\nfunction modalOpen(curentModal) {\r\n\tif (curentModal && unlock) {\r\n\t\tpreviousActiveElement = document.activeElement;\r\n\t\tconst modalActive = document.querySelector('.modal.open');\r\n\t\tif (modalActive) {\r\n\t\t\tmodalClose(modalActive, false);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tbodyLock();\r\n\t\t}\r\n\t\tcurentModal.classList.add('open');\r\n\r\n\t\tcurentModal.addEventListener(\"mousedown\", function (e) {\r\n\t\t\tif (isMultipleClick === false) {\r\n\t\t\t\tif (!e.target.closest('.modal__content')) {\r\n\t\t\t\t\tmodalClose(e.target.closest('.modal'));\r\n\t\t\t\t}\r\n\t\t\t\tisMultipleClick = true;\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tisMultipleClick = false;\r\n\t\t\t\t}, timeout);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\nfunction modalClose(modalActive, doUnlock = true) {\r\n\tif (unlock) {\r\n\t\tmodalActive.classList.remove('open');\r\n\t\tif (doUnlock) {\r\n\t\t\tbodyUnlock();\r\n\t\t}\r\n\t}\r\n\tsetTimeout(function () {\r\n\t\tpreviousActiveElement.focus();\r\n\t}, timeout);\r\n\r\n}\r\n\r\nfunction bodyLock() {\r\n\tconst lockPaddingValue = window.innerWidth - body.offsetWidth + 'px';\r\n\tif (lockPadding.length > 0) {\r\n\t\tfor (let index = 0; index < lockPadding.length; index++) {\r\n\t\t\tconst el = lockPadding[index];\r\n\t\t\tel.style.paddingRight = lockPaddingValue;\r\n\t\t}\r\n\t}\r\n\tbody.style.paddingRight = lockPaddingValue;\r\n\tif (!body.classList.contains('lock')) {\r\n\t\tbodyWasNotLock = true;\r\n\t\tif (isiPhone || isiPad || isiPod) {\r\n\t\t\tdisableScroll();\r\n\t\t} else {\r\n\t\t\tbody.classList.add('lock');\r\n\t\t}\r\n\t} else {\r\n\t\tbodyWasNotLock = false;\r\n\t}\r\n\tunlock = false;\r\n\tsetTimeout(function () {\r\n\t\tunlock = true;\r\n\t}, timeout);\r\n}\r\n\r\nfunction bodyUnlock() {\r\n\tsetTimeout(function () {\r\n\t\tif (lockPadding.length > 0) {\r\n\t\t\tfor (let index = 0; index < lockPadding.length; index++) {\r\n\t\t\t\tconst el = lockPadding[index];\r\n\t\t\t\tel.style.paddingRight = '0px';\r\n\t\t\t}\r\n\t\t}\r\n\t\tbody.style.paddingRight = '0px';\r\n\t\tif (bodyWasNotLock == true) {\r\n\t\t\tif (isiPhone || isiPad || isiPod) {\r\n\t\t\t\tenableScroll();\r\n\t\t\t} else {\r\n\t\t\t\tbody.classList.remove('lock');\r\n\t\t\t}\r\n\t\t}\r\n\t}, timeout);\r\n}\r\n\r\ndocument.addEventListener('keydown', function (e) {\r\n\tif (document.querySelector('.modal.open')) {\r\n\t\tif (e.which === 27) {\r\n\t\t\tconst modalActive = document.querySelector('.modal.open');\r\n\t\t\tmodalClose(modalActive);\r\n\t\t}\r\n\t}\r\n});\r\n(function () {\r\n\tif (!Element.prototype.closest) {\r\n\t\tElement.prototype.closest = function (css) {\r\n\t\t\tvar node = this;\r\n\t\t\twhile (node) {\r\n\t\t\t\tif (node.matches(css)) return node;\r\n\t\t\t\telse node = node.parentElement;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t}\r\n})();\r\n(function () {\r\n\tif (!Element.prototype.matches) {\r\n\t\tElement.prototype.matches = Element.prototype.matchesSelector ||\r\n\t\t\tElement.prototype.webkitMatchesSelector ||\r\n\t\t\tElement.prototype.mozMatchesSelector ||\r\n\t\t\tElement.prototype.msMatchesSelector;\r\n\t}\r\n})();;\n\t// // Burger\r\n\r\n/* Бургер-меню\r\n\t1. Добавить модификаторы для бургера и меню.\r\n\t2. Изменить aria-expended.\r\n\t3. Запретить скролл.\r\n\t4. Выключать кнопку открытия меню до завершения анимации.\r\n*/\r\n\r\nclass Burger {\r\n\tconstructor(btn, list) {\r\n\t\tthis.btn = btn;\r\n\t\tthis.list = list;\r\n\t\tthis.opened = false;\r\n\t\tthis.isIphone = isiPhone || isiPad || isiPod;\r\n\t\tthis.btnDisabled = false;\r\n\t}\r\n\r\n\topen() {\r\n\t\tthis.disableBtn();\r\n\t\tif (this.isIphone) {\r\n\t\t\tdisableScroll();\r\n\t\t} else {\r\n\t\t\tbody.classList.add('lock')\r\n\t\t}\r\n\t\tthis.btn.classList.add('burger--active');\r\n\t\tthis.btn.setAttribute('aria-expanded', true);\r\n\t\tthis.list.classList.add('header__nav--active');\r\n\t\tthis.list.setAttribute('aria-hidden', false);\r\n\r\n\t}\r\n\r\n\tclose() {\r\n\t\tthis.disableBtn();\r\n\t\tif (this.isIphone) {\r\n\t\t\tenableScroll();\r\n\t\t} else {\r\n\t\t\tbody.classList.remove('lock')\r\n\t\t}\r\n\t\tthis.btn.classList.remove('burger--active');\r\n\t\tthis.btn.setAttribute('aria-expanded', false);\r\n\t\tthis.list.classList.remove('header__nav--active');\r\n\t\tthis.list.setAttribute('aria-hidden', true);\r\n\r\n\t}\r\n\r\n\ttoggle() {\r\n\t\tif (this.btn.classList.contains('burger--active')) {\r\n\t\t\tthis.close();\r\n\t\t} else {\r\n\t\t\tthis.open();\r\n\t\t}\r\n\t}\r\n\r\n\tdisableBtn() {\r\n\t\tthis.btn.disabled = true;\r\n\t\tthis.list.addEventListener('transitionend', () => {\r\n\t\t\tthis.btn.disabled = false;\r\n\t\t})\r\n\t}\r\n};\n\t// -- //\n\n\theader.addEventListener('click', (e) => {\n\t\tswitch (e.target) {\n\t\t\tcase e.target.closest('.burger'):\n\t\t\t\tburger.toggle();\n\t\t\t\tbreak;\n\n\t\t\tcase e.target.closest('.header__link'):\n\t\t\t\tif (media.matches) setTimeout(() => { burger.close() }, 200);\n\t\t\t\tbreak;\n\t\t}\n\t})\n})\n"]}