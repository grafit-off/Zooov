document.addEventListener("DOMContentLoaded",()=>{class t{constructor(t=100,e=(()=>{})){this.time=t,this.functions=e,this.timeOut=null}init(){clearTimeout(this.timeOut),this.timeOut=setTimeout(()=>{this.functions()},this.time)}}class e{constructor(t,e,i){this.selector=document.querySelector("."+t),this.selectorClassName=t,this.breakpoint=i,this.swiperObj=e,this.initSlider=null}create(){window.innerWidth<=this.breakpoint&&"false"==this.selector.dataset.mobile&&(this.initSlider=new Swiper(this.selector,this.swiperObj),this.selector.dataset.mobile="true")}destroy(){window.innerWidth>this.breakpoint&&(this.selector.dataset.mobile="false",this.selector.classList.contains(this.selectorClassName+"initialized")&&this.initSlider.destroy())}init(){this.selector.dataset.mobile="false",this.create(),this.destroy()}}class i{constructor(t){this.accordion=t.selector,this.trigger=this.accordion.querySelector(".accordion__trigger"),this.body=this.accordion.querySelector(".accordion__body"),this.animated=!1,t.animSettings?this.animSettings=t.animSettings:this.animSettings={duration:500,easing:"ease"},this.trigger.addEventListener("click",()=>this.toggle())}open(){this.trigger.classList.add("accordion__trigger--active"),this.body.classList.add("accordion__body--show"),this.trigger.setAttribute("aria-expanded",!0),this.body.setAttribute("aria-hidden",!1);let t=this.body.clientHeight;this.body.style.height=0,this.animated=!0,this.body.animate([{opacity:"1",height:t+"px"}],this.animSettings).addEventListener("finish",()=>{this.body.style=null,this.animated=!1})}close(){this.trigger.classList.remove("accordion__trigger--active"),this.trigger.setAttribute("aria-expanded",!1),this.body.setAttribute("aria-hidden",!0),this.body.style.height=this.body.clientHeight+"px",this.animated=!0,this.body.animate([{opacity:"0",height:0}],this.animSettings).addEventListener("finish",()=>{this.body.style=null,this.body.classList.remove("accordion__body--show"),this.animated=!1})}toggle(){this.animated||(this.body.classList.contains("accordion__body--show")?this.close():this.open())}}const s=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),o=(document.documentElement.style,null!=navigator.userAgent.match(/iPhone/i)),n=null!=navigator.userAgent.match(/iPad/i),a=null!=navigator.userAgent.match(/iPod/i),l=window.matchMedia("(max-width: 992px)"),r=document.querySelector(".body"),c=document.querySelector(".header"),d=(c.querySelectorAll(".header__link"),c.querySelector(".burger")),h=c.querySelector(".header__nav"),u=new class{constructor(t,e){this.btn=t,this.list=e,this.opened=!1,this.isIphone=o||n||a,this.btnDisabled=!1}open(){this.disableBtn(),this.btn.classList.add("burger--active"),this.btn.setAttribute("aria-expanded",!0),this.list.classList.add("header__nav--active"),this.list.setAttribute("aria-hidden",!1),this.isIphone?setTimeout(()=>{w()},300):r.classList.add("lock")}close(){this.disableBtn(),this.isIphone?v():r.classList.remove("lock"),this.btn.classList.remove("burger--active"),this.btn.setAttribute("aria-expanded",!1),this.list.classList.remove("header__nav--active"),this.list.setAttribute("aria-hidden",!0)}toggle(){this.btn.classList.contains("burger--active")?this.close():this.open()}disableBtn(){this.btn.disabled=!0,this.list.addEventListener("transitionend",()=>{this.btn.disabled=!1})}}(d,h),m=document.querySelector(".hero__link"),p=new e("classification-swiper",{containerModifierClass:"classification-swiper",wrapperClass:"classification-swiper__wrapper",slideClass:"classification-swiper__slide",slidesPerView:1,grabCursor:!0,pagination:{el:".classification-swiper__pagination",clickable:!0},a11y:{paginationBulletMessage:"Перейти к слайду номер {{index}}"},watchSlidesVisibility:!0},767),g=new e("diet-swiper",{containerModifierClass:"diet-swiper",wrapperClass:"diet-swiper__wrapper",slideClass:"diet-swiper__slide",slidesPerView:1.25,spaceBetween:25,grabCursor:!0,pagination:{el:".diet-swiper__pagination",clickable:!0},a11y:{paginationBulletMessage:"Перейти к слайду номер {{index}}"},watchSlidesVisibility:!0},767),y=new t(300,()=>{p.init(),g.init(),console.log("ResizeDebounce")}),b=new t(100,()=>{!function(){let t=window.pageYOffset;if(!c.classList.contains("header--active")&&t>window.innerHeight)c.classList.add("header--active"),d.classList.add("burger--scroll"),"animate"in c&&c.animate([{top:"-100px"},{top:"0"}],{duration:200,easing:"ease-out"});else if(c.classList.contains("header--active")&&window.innerHeight>t&&!d.classList.contains("burger--active")&&"animate"in c){c.animate([{top:"0"},{top:"-100px"}],{duration:200,easing:"ease-out"}).addEventListener("finish",()=>{c.classList.remove("header--active"),d.classList.remove("burger--scroll")})}}(),console.log("ScrollDebounce")});function f(t){const e=document.querySelector(t);if(n||o||a&&null!==e){const t=document.body.getBoundingClientRect(),i=e.getBoundingClientRect().top-t.top,s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};return Math.easeInOutQuad=function(t,e,i,s){return(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},void function(t,e,i){let o=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,n=t-o,a=0;i=void 0===i?500:i;let l=function(){a+=20;let t=Math.easeInOutQuad(a,o,n,i);var r;r=t,document.documentElement.scrollTop=r,document.body.parentNode.scrollTop=r,document.body.scrollTop=r,a<i?s(l):e&&"function"==typeof e&&e()};l()}(i-15,null,500)}if(null!==e){let t=e.offsetTop-(l.matches?20:-1);window.scrollTo({top:t,behavior:"smooth"})}}document.querySelectorAll(".accordion__item").forEach(t=>new i({selector:t}));let w=()=>{let t=window.scrollY;document.querySelector("html").style.scrollBehavior="auto",document.body.classList.add("ios-lock"),document.body.dataset.position=t,document.body.style.top=-t+"px"},v=()=>{let t=parseInt(document.body.dataset.position,10);document.body.style.top="auto",document.body.classList.remove("ios-lock"),window.scroll({top:t,left:0}),document.querySelector("html").removeAttribute("style"),document.body.removeAttribute("data-position")};const L=document.querySelectorAll(".animate-item");if(s)L.forEach(t=>{t.classList.add("animated")});else{const t=(t,e,i,s=0)=>{let o=t.getBoundingClientRect();t.dataset.delay&&(s=t.dataset.delay),o.top+o.height-o.height*i>0&&window.innerHeight-o.top-o.height*e>0?(t.classList.add("animated"),t.style.transitionDelay=s+"s"):t.hasAttribute("data-animation-once")||t.classList.remove("animated")};0!=L.length&&(L.forEach(e=>{t(e,.5,.5)}),document.addEventListener("scroll",()=>{L.forEach(e=>{t(e,.5,.5)})}))}const S=document.querySelectorAll(".modal-btn"),_=document.querySelectorAll(".fixed-padding"),E=document.querySelectorAll(".close-modal");let k,A,q,T=!0,x=!1;if("function"!=typeof w&&"function"!=typeof v&&console.error(`Тип данных переменных "disableScroll" и "enableScroll": "${typeof w} и ${typeof v}"! Для IOS НЕ будет выполнятся скрипт scrollLockIOS`),S.length>0)for(let t=0;t<S.length;t++){const e=S[t];e.addEventListener("click",(function(t){const i=e.dataset.path,s=document.getElementById(i);null!=s?(C(s),setTimeout(()=>{E.forEach(t=>{t.focus()})},100),t.preventDefault()):console.error(`Модальное окно не существует!\n modalName: ${i}, currentModal: ${s}`)}))}if(E.length>0)for(let t=0;t<E.length;t++){const e=E[t];k=e,e.addEventListener("click",(function(t){M(e.closest(".modal")),t.preventDefault()}))}function C(t){if(t&&T){q=document.activeElement;const e=document.querySelector(".modal.open");e?M(e,!1):function(){const t=window.innerWidth-r.offsetWidth+"px";if(_.length>0)for(let e=0;e<_.length;e++){_[e].style.paddingRight=t}r.style.paddingRight=t,r.classList.contains("lock")?A=!1:(A=!0,o||n||a?w():r.classList.add("lock"));T=!1,setTimeout((function(){T=!0}),800)}(),t.classList.add("open"),t.addEventListener("mousedown",(function(t){!1===x?(t.target.closest(".modal__content")||M(t.target.closest(".modal")),x=!0):setTimeout(()=>{x=!1},800)}))}}function M(t,e=!0){T&&(t.classList.remove("open"),e&&setTimeout((function(){if(_.length>0)for(let t=0;t<_.length;t++)_[t].style.paddingRight="0px";r.style.paddingRight="0px",1==A&&(o||n||a?v():r.classList.remove("lock"))}),800)),setTimeout((function(){q.focus()}),800)}document.addEventListener("keydown",(function(t){if(document.querySelector(".modal.open")&&27===t.which){M(document.querySelector(".modal.open"))}})),Element.prototype.closest||(Element.prototype.closest=function(t){for(var e=this;e;){if(e.matches(t))return e;e=e.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),c.addEventListener("click",t=>{switch(t.target){case t.target.closest(".burger"):u.toggle();break;case t.target.closest(".header__link"):t.preventDefault(),l.matches&&u.close(),setTimeout(()=>{f(t.target.hash)},200)}}),m.addEventListener("click",()=>{f(m.hash)}),p.init(),g.init(),window.addEventListener("resize",()=>{y.init()}),window.addEventListener("scroll",(function(){b.init()}))});
//# sourceMappingURL=main.js.map
