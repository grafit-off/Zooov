document.addEventListener("DOMContentLoaded",()=>{class e{constructor(e=100,t=(()=>{})){this.time=e,this.functions=t,this.timeOut=null}init(){clearTimeout(this.timeOut),this.timeOut=setTimeout(()=>{this.functions()},this.time)}}class t{constructor(e,t,i){this.selector=document.querySelector("."+e),this.selectorClassName=e,this.breakpoint=i,this.swiperObj=t,this.initSlider=null}create(){window.innerWidth<=this.breakpoint&&"false"==this.selector.dataset.mobile&&(this.initSlider=new Swiper(this.selector,this.swiperObj),this.selector.dataset.mobile="true")}destroy(){window.innerWidth>this.breakpoint&&(this.selector.dataset.mobile="false",this.selector.classList.contains(this.selectorClassName+"initialized")&&this.initSlider.destroy())}init(){this.selector.dataset.mobile="false",this.create(),this.destroy()}}class i{constructor(e){this.accordion=e.selector,this.trigger=this.accordion.querySelector(".accordion__trigger"),this.body=this.accordion.querySelector(".accordion__body"),this.animated=!1,e.animSettings?this.animSettings=e.animSettings:this.animSettings={duration:500,easing:"ease"},this.trigger.addEventListener("click",()=>this.toggle())}open(){this.trigger.classList.add("accordion__trigger--active"),this.body.classList.add("accordion__body--show"),this.trigger.setAttribute("aria-expanded",!0),this.body.setAttribute("aria-hidden",!1);let e=this.body.clientHeight;this.body.style.height=0,this.animated=!0,this.body.animate([{opacity:"1",height:e+"px"}],this.animSettings).addEventListener("finish",()=>{this.body.style=null,this.animated=!1})}close(){this.trigger.classList.remove("accordion__trigger--active"),this.trigger.setAttribute("aria-expanded",!1),this.body.setAttribute("aria-hidden",!0),this.body.style.height=this.body.clientHeight+"px",this.animated=!0,this.body.animate([{opacity:"0",height:0}],this.animSettings).addEventListener("finish",()=>{this.body.style=null,this.body.classList.remove("accordion__body--show"),this.animated=!1})}toggle(){this.animated||(this.body.classList.contains("accordion__body--show")?this.close():this.open())}}/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),document.documentElement.style;const s=null!=navigator.userAgent.match(/iPhone/i),n=null!=navigator.userAgent.match(/iPad/i),o=null!=navigator.userAgent.match(/iPod/i),r=window.matchMedia("(max-width: 992px)"),a=document.querySelector(".body"),l=document.querySelector(".header"),c=l.querySelectorAll(".header__link"),d=l.querySelector(".burger"),u=l.querySelector(".header__nav"),m=new class{constructor(e,t){this.btn=e,this.list=t,this.opened=!1,this.isIphone=s||n||o,this.btnDisabled=!1}open(){this.disableBtn(),this.btn.classList.add("burger--active"),this.btn.setAttribute("aria-expanded",!0),this.list.classList.add("header__nav--active"),this.list.setAttribute("aria-hidden",!1),this.isIphone?setTimeout(()=>{z()},300):a.classList.add("lock")}close(){this.disableBtn(),this.isIphone?V():a.classList.remove("lock"),this.btn.classList.remove("burger--active"),this.btn.setAttribute("aria-expanded",!1),this.list.classList.remove("header__nav--active"),this.list.setAttribute("aria-hidden",!0)}toggle(){this.btn.classList.contains("burger--active")?this.close():this.open()}disableBtn(){this.btn.disabled=!0,this.list.addEventListener("transitionend",()=>{this.btn.disabled=!1})}}(d,u),h=document.querySelector(".hero__link"),p=document.querySelector(".descr-modal"),g=document.querySelector(".order-modal"),y=document.querySelector("#modal-calc"),_=document.querySelector(".response-modal"),v=p.querySelector(".image-preview__main-img"),b=document.querySelector(".diet"),f=document.querySelectorAll(".field__input"),w=new class{constructor(e){this.stepper=document.querySelector(""+e),this.input=this.stepper.querySelector(".stepper__input"),this.btnPlus=this.stepper.querySelector(".stepper__btn--plus"),this.btnMinus=this.stepper.querySelector(".stepper__btn--minus"),this.count=this.input.value,this.input.addEventListener("keyup",e=>{this.change(e)}),this.input.addEventListener("keypress",e=>{this.allowNumbersOnly(e)}),this.input.addEventListener("change",e=>{this.change(e)}),this.btnPlus.addEventListener("click",e=>{this.calculate(e,!0)}),this.btnMinus.addEventListener("click",e=>{this.calculate(e,!1)})}getCount(){return this.count}callBack(e){this.input.addEventListener("keyup",t=>{e()}),this.input.addEventListener("keypress",t=>{e()}),this.input.addEventListener("change",t=>{e()}),this.btnPlus.addEventListener("click",t=>{e()}),this.btnMinus.addEventListener("click",t=>{e()})}allowNumbersOnly(e){let t=e.which?e.which:e.keyCode;t>31&&(t<48||t>57)&&e.preventDefault()}disableBtn(){1==this.count||1e3==this.count?(this.count=1,this.btnMinus.classList.add("stepper__btn--disabled"),this.btnMinus.disabled=!0):(this.btnMinus.classList.remove("stepper__btn--disabled"),this.btnMinus.disabled=!1)}change(e){let t=e.currentTarget;0==t.value&&(t.value=1),this.setWidth(),this.count=this.input.value,this.disableBtn()}setWidth(){/iPhone|iPad|iPod/i.test(navigator.userAgent)?this.input.style.width=this.input.value.length+2+"ex":this.input.style.width=this.input.value.length+1+"ex"}calculate(e,t){e.preventDefault(),t?this.count++:this.count--,this.disableBtn(),this.input.value=this.count,this.setWidth()}}(".stepper"),S=document.querySelector(".select__item"),L=document.querySelector(".order-form__price"),q=document.querySelector(".contact-form"),E=document.querySelector(".order-form"),k=document.querySelector(".calc-form"),A=document.querySelector(".snackbar");let x;const C={notNumber:/\D/,notEmpty:/^(?!\s*$).+/,phone:/^\d{7,14}$/,email:/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/},T=new t("classification-swiper",{containerModifierClass:"classification-swiper",wrapperClass:"classification-swiper__wrapper",slideClass:"classification-swiper__slide",slidesPerView:1,grabCursor:!0,pagination:{el:".classification-swiper__pagination",clickable:!0},a11y:{paginationBulletMessage:"Перейти к слайду номер {{index}}"},watchSlidesVisibility:!0},767),M=new t("diet-swiper",{containerModifierClass:"diet-swiper",wrapperClass:"diet-swiper__wrapper",slideClass:"diet-swiper__slide",slidesPerView:1.25,spaceBetween:25,grabCursor:!0,pagination:{el:".diet-swiper__pagination",clickable:!0,bulletElement:"button"},a11y:{paginationBulletMessage:"Перейти к слайду номер {{index}}"},watchSlidesVisibility:!0},767),B=new e(300,()=>{T.init(),M.init()}),O=new e(100,()=>{!function(){let e=window.pageYOffset;if(!l.classList.contains("header--active")&&e>window.innerHeight)l.classList.add("header--active"),d.classList.add("burger--scroll"),"animate"in l&&l.animate([{top:"-100px"},{top:"0"}],{duration:200,easing:"ease-out"});else if(l.classList.contains("header--active")&&window.innerHeight>e&&!d.classList.contains("burger--active")&&"animate"in l){l.animate([{top:"0"},{top:"-100px"}],{duration:200,easing:"ease-out"}).addEventListener("finish",()=>{l.classList.remove("header--active"),d.classList.remove("burger--scroll")})}}(),N()});function P(e){const t=document.querySelector(e);if(n||s||o&&null!==t){const e=document.body.getBoundingClientRect(),i=t.getBoundingClientRect().top-e.top,s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};return Math.easeInOutQuad=function(e,t,i,s){return(e/=s/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},void function(e,t,i){let n=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,o=e-n,r=0;i=void 0===i?500:i;let a=function(){r+=20;let e=Math.easeInOutQuad(r,n,o,i);var l;l=e,document.documentElement.scrollTop=l,document.body.parentNode.scrollTop=l,document.body.scrollTop=l,r<i?s(a):t&&"function"==typeof t&&t()};a()}(i-15,null,500)}if(null!==t){let e=t.offsetTop-(r.matches?20:-1);window.scrollTo({top:e,behavior:"smooth"})}}function N(){for(let e=c.length-1;e>=0;e--){let t=document.querySelector(c[e].hash);if(window.scrollY>t.offsetTop-40){document.querySelector(".header__link--active")&&document.querySelector(".header__link--active").classList.remove("header__link--active"),c[e].classList.add("header__link--active");break}}}function D(e){const t=e.closest(".field").querySelector(".field__label");t.classList.contains("field__label--focused")&&""===e.value.trim()?t.classList.remove("field__label--focused"):t.classList.add("field__label--focused")}function I(e){let t={name:""+e.querySelector(".product__heading").textContent,type:""+e.querySelector(".product__type").textContent,image:""+e.querySelector(".product__image").src,imageAlt:""+this.name.toLowerCase()};_.querySelector(".response-modal__img").src=t.image,g.querySelector(".order-modal__img").src=t.image,g.querySelector(".order-modal__img").alt=t.imageAlt,g.querySelector(".order-form__title ").textContent=t.name,g.querySelector(".order-form__type ").textContent=t.type}function j(){let e=0;e=1.56*parseInt(S.value)*w.getCount(),L.textContent=e+"₽"}async function R(e,t){try{let i=await fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json; charset=utf-8"}}),s=await i.json();return console.log("Response Status: "+i.status),console.log(s),!0}catch(e){return console.error(e),!1}}function $(e){e.value=e.value.trim(),C[e.dataset.validation].test(e.value.trim())||(e.classList.add("input-invalid"),x=!0)}function W(e=A.textContent,t=0,i="#333",s=3e3){setTimeout(()=>{A.textContent=e,A.style.backgroundColor=i,A.classList.add("snackbar--show"),A.removeAttribute("hidden",""),setTimeout(()=>{A.classList.remove("snackbar--show"),A.setAttribute("hidden","")},s)},t)}function H(e){e.target.closest("[data-validation]")&&e.target.classList.contains("input-invalid")&&e.target.classList.remove("input-invalid")}document.querySelectorAll(".accordion__item").forEach(e=>new i({selector:e}));let z=()=>{let e=window.scrollY;document.querySelector("html").style.scrollBehavior="auto",document.body.classList.add("ios-lock"),document.body.dataset.position=e,document.body.style.top=-e+"px"},V=()=>{let e=parseInt(document.body.dataset.position,10);document.body.style.top="auto",document.body.classList.remove("ios-lock"),window.scroll({top:e,left:0}),document.querySelector("html").removeAttribute("style"),document.body.removeAttribute("data-position")};const F=document.querySelectorAll(".modal-btn"),Y=document.querySelectorAll(".fixed-padding"),Q=document.querySelectorAll(".close-modal");let J,G,K,U=!0,X=!1;if("function"!=typeof z&&"function"!=typeof V&&console.error(`Тип данных переменных "disableScroll" и "enableScroll": "${typeof z} и ${typeof V}"! Для IOS НЕ будет выполнятся скрипт scrollLockIOS`),F.length>0)for(let e=0;e<F.length;e++){const t=F[e];t.addEventListener("click",(function(e){const i=t.dataset.path,s=document.getElementById(i);null!=s?(Z(s),setTimeout(()=>{Q.forEach(e=>{e.focus()})},100),e.preventDefault()):console.error(`Модальное окно не существует!\n modalName: ${i}, currentModal: ${s}`)}))}if(Q.length>0)for(let e=0;e<Q.length;e++){const t=Q[e];J=t,t.addEventListener("click",(function(e){ee(t.closest(".modal")),e.preventDefault()}))}function Z(e){if(e&&U){K=document.activeElement;const t=document.querySelector(".modal.open");t?ee(t,!1):function(){const e=window.innerWidth-a.offsetWidth+"px";if(Y.length>0)for(let t=0;t<Y.length;t++){Y[t].style.paddingRight=e}a.style.paddingRight=e,a.classList.contains("lock")?G=!1:(G=!0,a.classList.add("lock"));U=!1,setTimeout((function(){U=!0}),800)}(),e.classList.add("open"),e.addEventListener("mousedown",(function(e){!1===X?(e.target.closest(".modal__content")||ee(e.target.closest(".modal")),X=!0):setTimeout(()=>{X=!1},800)}))}}function ee(e,t=!0){U&&(e.classList.remove("open"),t&&setTimeout((function(){if(Y.length>0)for(let e=0;e<Y.length;e++)Y[e].style.paddingRight="0px";a.style.paddingRight="0px",1==G&&a.classList.remove("lock")}),800)),setTimeout((function(){K.focus()}),800)}document.addEventListener("keydown",(function(e){if(document.querySelector(".modal.open")&&27===e.which){ee(document.querySelector(".modal.open"))}})),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),l.addEventListener("click",e=>{e.target.closest(".burger")&&m.toggle(),e.target.closest(".header__link")&&(e.preventDefault(),r.matches&&m.close(),setTimeout(()=>{P(e.target.hash)},200))}),h.addEventListener("click",()=>{P(h.hash)}),p.addEventListener("click",e=>{var t;e.target.closest(".image-preview__button")&&(t=e.target.closest(".image-preview__button"),document.querySelector(".image-preview__button--active")&&document.querySelector(".image-preview__button--active").classList.remove("image-preview__button--active"),t.classList.add("image-preview__button--active"),v.src=t.querySelector(".image-preview__img").src)}),b.addEventListener("click",e=>{e.target.closest(".product__btn")&&(!function(e){let t={name:""+e.querySelector(".product__heading").textContent,text:""+e.querySelector(".product__text").textContent,type:""+e.querySelector(".product__type").textContent,weight:""+e.querySelector(".product__weight").textContent,images:[""+e.querySelector(".product__image").src,"img/image-preview2.jpg","img/image-preview3.jpg","img/image-preview4.jpg"]},i=document.querySelector("#modal-descr"),s="";t.images.forEach((e,t)=>{s+=`\n\t\t<li class="image-preview__item">\n\t\t\t<button class="image-preview__button btn-reset" aria-label="Показть изображение ${++t}">\n\t\t\t\t<img src="${e}" alt="" class="image-preview__img" aria-hidden="true">\n\t\t\t</button>\n\t\t</li>\n\t\t`}),i.querySelector(".image-preview__list").innerHTML=s,i.querySelector(".image-preview__list").firstElementChild.querySelector(".image-preview__button").classList.add("image-preview__button--active"),i.querySelector(".image-preview__main-img").src=t.images[0],i.querySelector(".descr-modal__title").textContent=t.name,i.querySelector(".descr-modal__text").textContent=t.text,i.querySelector(".descr-modal__type").textContent=t.type,i.querySelector(".descr-modal__weight").textContent=t.weight}(e.target.closest(".product__info")),I(e.target.closest(".product__info"))),e.target.closest(".product__order")&&I(e.target.closest(".product__wrapper").querySelector(".product__info"))}),f.forEach(e=>{e.addEventListener("focus",e=>{D(e.currentTarget)}),e.addEventListener("blur",e=>{D(e.currentTarget)})}),N(),AOS.init(),T.init(),M.init(),function(){const e=document.querySelectorAll(".select__item");for(let i=0;i<e.length;i++){const s=e[i],n=s.querySelectorAll("option"),o=document.createElement("div"),r=document.createElement("div"),a=document.createElement("button");a.setAttribute("tabindex","0"),s.setAttribute("tabindex","-1"),o.className="custom-select",r.className="custom-select__list",a.className="custom-select__current  btn-reset",a.setAttribute("type","button"),o.append(a,r),s.after(o);const l=()=>{a.classList.toggle("custom-select__current--show"),r.classList.toggle("custom-select__list--show")},c=()=>{a.addEventListener("click",l),a.addEventListener("keydown",e=>{"Enter"!=e.code&&"Escape"!=e.code||l()})},d=()=>{for(let t=0;t<e.length;t++){let i=e[t];i.classList.add("select__item--mobile"),i.addEventListener("change",()=>{i.nextElementSibling.querySelector(".custom-select__current").textContent=i.value})}};function t(e,t){navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?e():t()}(function(e,t){let i="";for(var s=0;s<n.length;s++)i+='<button type="button" class="custom-select__item btn-reset"  data-value="'+n[s].value+'">'+n[s].text+"</button>";r.innerHTML=i,e(),t()})(()=>a.textContent=s.value,()=>{const e=r.children;for(var t=0;t<e.length;t++){let i=e[t].getAttribute("data-value"),n=e[t].textContent;e[t].addEventListener("click",()=>{a.classList.remove("custom-select__current--show"),r.classList.remove("custom-select__list--show"),a.textContent=n,s.value=i,j()})}}),document.addEventListener("mouseup",e=>{o.contains(e.target)||(a.classList.remove("custom-select__current--show"),r.classList.remove("custom-select__list--show"))}),t(d,c)}}(),j(),E.addEventListener("submit",async e=>{e.preventDefault();let t={};x=!1,E.querySelectorAll("[data-validation]").forEach(e=>{$(e)}),x||(E.querySelectorAll("[data-validation]").forEach(e=>{t[e.name]=e.value}),t.price=L.textContent,t.volume=E.querySelector('select[name="volume"]').value,await R("https://jsonplaceholder.typicode.com/posts",t)?(E.reset(),Z(document.querySelector("#modal-response"))):W("Ошибка! Мы скоро это исправим!",800,"red"))}),E.addEventListener("focusin",e=>{H(e)}),q.addEventListener("submit",async e=>{e.preventDefault();let t={};x=!1,q.querySelectorAll("[data-validation]").forEach(e=>{$(e)}),x||(q.querySelectorAll("[data-validation]").forEach(e=>{t[e.name]=e.value}),await R("https://jsonplaceholder.typicode.com/posts",t)?(q.reset(),W("Спасибо! Мы скоро с Вами свяжемся!",800,"#38c428")):W("Ошибка! Мы скоро это исправим!",800,"red"))}),q.addEventListener("focusin",e=>{H(e)}),k.addEventListener("submit",async e=>{e.preventDefault();let t={};x=!1,k.querySelectorAll("[data-validation]").forEach(e=>{$(e)}),x||(k.querySelectorAll("[data-validation]").forEach(e=>{t[e.name]=e.value}),t.animal=k.querySelector('input[name="radio"]:checked').value,k.querySelector("textarea").value.trim()&&(t.message=k.querySelector("textarea").value),await R("https://jsonplaceholder.typicode.com/posts",t)?(ee(y),k.reset(),W("Спасибо! Мы скоро с Вами свяжемся!",800,"#38c428")):W("Ошибка! Мы скоро это исправим!",800,"red"))}),k.addEventListener("focusin",e=>{H(e)}),w.callBack(()=>{j()}),window.addEventListener("resize",()=>{B.init()}),window.addEventListener("scroll",(function(){O.init()}))});
//# sourceMappingURL=main.js.map
