document.addEventListener("DOMContentLoaded",()=>{class e{constructor(e=100,t=(()=>{})){this.time=e,this.functions=t,this.timeOut=null}init(){clearTimeout(this.timeOut),this.timeOut=setTimeout(()=>{this.functions()},this.time)}}class t{constructor(e,t,i){this.selector=document.querySelector("."+e),this.selectorClassName=e,this.breakpoint=i,this.swiperObj=t,this.initSlider=null}create(){window.innerWidth<=this.breakpoint&&"false"==this.selector.dataset.mobile&&(this.initSlider=new Swiper(this.selector,this.swiperObj),this.selector.dataset.mobile="true")}destroy(){window.innerWidth>this.breakpoint&&(this.selector.dataset.mobile="false",this.selector.classList.contains(this.selectorClassName+"initialized")&&this.initSlider.destroy())}init(){this.selector.dataset.mobile="false",this.create(),this.destroy()}}const i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),s=(document.documentElement.style,null!=navigator.userAgent.match(/iPhone/i)),o=null!=navigator.userAgent.match(/iPad/i),n=null!=navigator.userAgent.match(/iPod/i),a=window.matchMedia("(max-width: 992px)"),l=document.querySelector(".body"),r=document.querySelector(".header"),c=(r.querySelectorAll(".header__link"),r.querySelector(".burger")),d=r.querySelector(".header__nav"),u=new class{constructor(e,t){this.btn=e,this.list=t,this.opened=!1,this.isIphone=s||o||n,this.btnDisabled=!1}open(){this.disableBtn(),this.btn.classList.add("burger--active"),this.btn.setAttribute("aria-expanded",!0),this.list.classList.add("header__nav--active"),this.list.setAttribute("aria-hidden",!1),this.isIphone?setTimeout(()=>{w()},300):l.classList.add("lock")}close(){this.disableBtn(),this.isIphone?b():l.classList.remove("lock"),this.btn.classList.remove("burger--active"),this.btn.setAttribute("aria-expanded",!1),this.list.classList.remove("header__nav--active"),this.list.setAttribute("aria-hidden",!0)}toggle(){this.btn.classList.contains("burger--active")?this.close():this.open()}disableBtn(){this.btn.disabled=!0,this.list.addEventListener("transitionend",()=>{this.btn.disabled=!1})}}(c,d),h=new t("classification-swiper",{containerModifierClass:"classification-swiper",wrapperClass:"classification-swiper__wrapper",slideClass:"classification-swiper__slide",slidesPerView:1,grabCursor:!0,pagination:{el:".classification-swiper__pagination",clickable:!0},a11y:{paginationBulletMessage:"Перейти к слайду номер {{index}}"},watchSlidesVisibility:!0},767),m=new t("diet-swiper",{containerModifierClass:"diet-swiper",wrapperClass:"diet-swiper__wrapper",slideClass:"diet-swiper__slide",slidesPerView:1.25,spaceBetween:25,grabCursor:!0,pagination:{el:".diet-swiper__pagination",clickable:!0},a11y:{paginationBulletMessage:"Перейти к слайду номер {{index}}"},watchSlidesVisibility:!0},767),p=new e(300,()=>{h.init(),m.init(),console.log("ResizeDebounce")}),f=new e(100,()=>{!function(){let e=window.pageYOffset;if(!r.classList.contains("header--active")&&e>window.innerHeight)r.classList.add("header--active"),c.classList.add("burger--scroll"),"animate"in r&&r.animate([{top:"-100px"},{top:"0"}],{duration:200,easing:"ease-out"});else if(r.classList.contains("header--active")&&window.innerHeight>e&&!c.classList.contains("burger--active")&&"animate"in r){r.animate([{top:"0"},{top:"-100px"}],{duration:200,easing:"ease-out"}).addEventListener("finish",()=>{r.classList.remove("header--active"),c.classList.remove("burger--scroll")})}}(),console.log("ScrollDebounce")});function g(e){const t=document.querySelector(e);if(o||s||n&&null!==t){const e=document.body.getBoundingClientRect(),i=t.getBoundingClientRect().top-e.top,s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};return Math.easeInOutQuad=function(e,t,i,s){return(e/=s/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},void function(e,t,i){let o=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,n=e-o,a=0;i=void 0===i?500:i;let l=function(){a+=20;let e=Math.easeInOutQuad(a,o,n,i);var r;r=e,document.documentElement.scrollTop=r,document.body.parentNode.scrollTop=r,document.body.scrollTop=r,a<i?s(l):t&&"function"==typeof t&&t()};l()}(i-15,null,200)}if(null!==t){let e=t.offsetTop-(a.matches?20:-1);window.scrollTo({top:e,behavior:"smooth"})}}let w=()=>{let e=window.scrollY;document.querySelector("html").style.scrollBehavior="auto",document.body.classList.add("ios-lock"),document.body.dataset.position=e,document.body.style.top=-e+"px"},b=()=>{let e=parseInt(document.body.dataset.position,10);document.body.style.top="auto",document.body.classList.remove("ios-lock"),window.scroll({top:e,left:0}),document.querySelector("html").removeAttribute("style"),document.body.removeAttribute("data-position")};const y=document.querySelectorAll(".animate-item");if(i)y.forEach(e=>{e.classList.add("animated")});else{const e=(e,t,i,s=0)=>{let o=e.getBoundingClientRect();e.dataset.delay&&(s=e.dataset.delay),o.top+o.height-o.height*i>0&&window.innerHeight-o.top-o.height*t>0?(e.classList.add("animated"),e.style.transitionDelay=s+"s"):e.hasAttribute("data-animation-once")||e.classList.remove("animated")};0!=y.length&&(y.forEach(t=>{e(t,.5,.5)}),document.addEventListener("scroll",()=>{y.forEach(t=>{e(t,.5,.5)})}))}const v=document.querySelectorAll(".modal-btn"),L=document.querySelectorAll(".fixed-padding"),S=document.querySelectorAll(".close-modal");let E,_,k,A=!0,q=!1;if("function"!=typeof w&&"function"!=typeof b&&console.error(`Тип данных переменных "disableScroll" и "enableScroll": "${typeof w} и ${typeof b}"! Для IOS НЕ будет выполнятся скрипт scrollLockIOS`),v.length>0)for(let e=0;e<v.length;e++){const t=v[e];t.addEventListener("click",(function(e){const i=t.dataset.path,s=document.getElementById(i);null!=s?(T(s),setTimeout(()=>{S.forEach(e=>{e.focus()})},100),e.preventDefault()):console.error(`Модальное окно не существует!\n modalName: ${i}, currentModal: ${s}`)}))}if(S.length>0)for(let e=0;e<S.length;e++){const t=S[e];E=t,t.addEventListener("click",(function(e){C(t.closest(".modal")),e.preventDefault()}))}function T(e){if(e&&A){k=document.activeElement;const t=document.querySelector(".modal.open");t?C(t,!1):function(){const e=window.innerWidth-l.offsetWidth+"px";if(L.length>0)for(let t=0;t<L.length;t++){L[t].style.paddingRight=e}l.style.paddingRight=e,l.classList.contains("lock")?_=!1:(_=!0,s||o||n?w():l.classList.add("lock"));A=!1,setTimeout((function(){A=!0}),800)}(),e.classList.add("open"),e.addEventListener("mousedown",(function(e){!1===q?(e.target.closest(".modal__content")||C(e.target.closest(".modal")),q=!0):setTimeout(()=>{q=!1},800)}))}}function C(e,t=!0){A&&(e.classList.remove("open"),t&&setTimeout((function(){if(L.length>0)for(let e=0;e<L.length;e++)L[e].style.paddingRight="0px";l.style.paddingRight="0px",1==_&&(s||o||n?b():l.classList.remove("lock"))}),800)),setTimeout((function(){k.focus()}),800)}document.addEventListener("keydown",(function(e){if(document.querySelector(".modal.open")&&27===e.which){C(document.querySelector(".modal.open"))}})),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),r.addEventListener("click",e=>{switch(e.target){case e.target.closest(".burger"):u.toggle();break;case e.target.closest(".header__link"):e.preventDefault(),a.matches&&u.close(),setTimeout(()=>{g(e.target.hash)},200)}}),h.init(),m.init(),window.addEventListener("resize",()=>{p.init()}),window.addEventListener("scroll",(function(){f.init()}))});
//# sourceMappingURL=main.js.map
